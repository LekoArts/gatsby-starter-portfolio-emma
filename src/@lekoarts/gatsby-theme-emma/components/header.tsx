/** @jsx jsx */
import { Flex, jsx, useColorMode } from "theme-ui"
import { Link } from "gatsby"
import Navigation from "./navigation"
import SocialLinks from "./social-links"
import ColorModeToggle from '../../../components/dl-toggle'

type HeaderProps = {
  meta: {
    [key: string]: string
  }
  nav: {
    title: string
    slug: string
  }[]
}

const Header = ({ meta, nav }: HeaderProps) => {
  const [colorMode, setColorMode] = useColorMode()
  const isDark = colorMode === `dark`
  const toggleColorMode = (e: React.SyntheticEvent) => {
    setColorMode(isDark ? `light` : `dark`)
  }

  const navEmpty = nav.length === 0

  return (
    <Flex as="header" variant="layout.header">
      {!navEmpty && <Navigation nav={nav} />}
      <Flex
        sx={{
          fontWeight: `bold`,
          fontSize: 4,
          flex: navEmpty ? 1 : [`1 0 50%`, 1],
          justifyContent: navEmpty ? `flex-start` : [`flex-end`, `center`],
        }}
      >
        {/* THIS IS MY LOGO */}
        <Link
          aria-label={`${meta.siteTitle}, Back to homepage`}
          sx={(t) => ({
            ...t.styles?.a,
            color: `text`,
            fontSize: 5,
            verticalAlign: `top`,
            ":hover": { color: `primary`, textDecoration: `none` },
          })}
          to="/"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            stroke="currentColor"
            fill="currentColor"
            viewBox="0 0 500 250"
            height="1.5em"
            width="2.75em"

            sx={{
              verticalAlign: `sub`
            }}
          >
            <path
              d="M228,177.4l-0.7,2.6c-0.4,1.5-1.1,2.7-2.3,3.7c-3.2,2.9-9.1,0.9-9.3-3.6c0,0,0-1.8,0-1.9c0-12.8,0.1-36,0.1-49
            c-0.7-19.2-28.2-19.2-28.9,0l0,28c0,5.6,0,17.3,0,22.8c0,0.9,0,2.1,0.1,3c1.4,19.1,19.2,33.7,38.3,30.6c12-1.7,22.6-10.4,26.4-22
            c1.3-3.8,1.8-7.7,1.6-11.6C252.4,165.5,232.1,163.2,228,177.4z"
            />
            <path
              d="M462.6,177.4l-0.7,2.6c-0.4,1.5-1.1,2.7-2.3,3.7c-3.2,2.9-9.1,0.9-9.3-3.6c0,0,0-1.8,0-1.9
            c0-12.8,0.1-36,0.1-49c-0.7-19.2-28.2-19.2-28.9,0l0,28c0,5.6,0,17.3,0,22.8c0,0.9,0,2.1,0.1,3c1.4,19.1,19.2,33.7,38.3,30.6
            c12-1.7,22.6-10.4,26.4-22c1.3-3.8,1.8-7.7,1.6-11.6C487,165.5,466.7,163.2,462.6,177.4z"
            />
            <path
              d="M138,189.4c-13.8,0-25-11.2-25-25c0-13.8,11.2-25,25-25c6.7,0,12.1-5.4,12.1-12.1c0-6.7-5.4-12.1-12.1-12.1
            c-27.1,0-49.1,22-49.1,49.1c0,27.1,22,49.1,49.1,49.1c6.7,0,12.1-5.4,12.1-12.1C150,194.8,144.6,189.4,138,189.4z"
            />
            <path
              d="M402.9,139.5c6.7,0,12.1-5.4,12.1-12.1c0-6.7-5.4-12.1-12.1-12.1c-27.1,0-49.1,22-49.1,49.1
            c0,27.1,22,49.1,49.1,49.1c6.7,0,12.1-5.4,12.1-12.1c0-6.7-5.4-12.1-12.1-12.1c-13.8,0-25-11.2-25-25
            C377.9,150.8,389.1,139.5,402.9,139.5z"
            />
            <circle cx="201.3" cy="84" r="12.2" />
            <circle cx="153.4" cy="164.6" r="12.2" />
            <path
              d="M62.4,169c-6.6-2-13.5,1.7-15.5,8.2c0,0-0.8,2.8-0.8,2.8c-0.9,3-3.4,5.1-6.4,5.1c-2.7-0.1-5.5-2.2-5.5-5.1
            c0-21.6,0-99.6,0-122.6c-0.8-19.3-28.2-19.1-28.9,0c0,22.7,0,101.5,0,122.9c0,12.2,7,24.1,17.8,29.8c8.8,4.8,19.9,5.2,29,1.1
            c6-2.7,11.2-7.1,14.6-12.7C72,189.4,75,173.2,62.4,169z"
            />
            <path
              d="M331.1,169c-6.6-2-13.5,1.7-15.5,8.2c0,0-0.8,2.8-0.8,2.8c-0.9,3-3.4,5.1-6.4,5.1c-2.7-0.1-5.5-2.2-5.5-5.1
            c0-21.6,0-99.6,0-122.6c-0.8-19.3-28.2-19.1-28.9,0c0,22.7,0,101.5,0,122.9c0,12.2,7,24.1,17.8,29.8c8.8,4.8,19.9,5.2,29,1.1
            c6-2.7,11.2-7.1,14.6-12.7C340.7,189.4,343.7,173.2,331.1,169z"
            />
            <g>
              <path
                d="M260.6,172.8c-0.6-7.9-6.8-12.2-13-12.2c-5.2,0-10.5,3-12.4,9.5l-0.7,2.6c-0.4,1.5-1.1,2.7-2.2,3.7
              c-1,0.9-2.3,1.3-3.6,1.3c-2.8,0-5.6-1.9-5.6-4.9c0,0,0-1.8,0-1.9c0-12.8,0-36,0.1-49c-0.4-9.6-7.4-14.4-14.5-14.4
              s-14.1,4.8-14.5,14.4l0,28c0,5.6,0,17.3,0,22.8c0,0.9,0,2.1,0.1,3c1.3,17.4,16.2,31,33.2,31c1.7,0,3.3-0.1,5-0.4
              c12-1.7,22.6-10.4,26.4-22C260.2,180.7,260.8,176.7,260.6,172.8z M255.2,183.2c-3.3,10.1-12.6,17.8-23.2,19.3h0l0,0
              c-1.5,0.2-2.9,0.4-4.4,0.4c-15,0-28.2-12.3-29.3-27.4l0-0.1l0-0.2c0-0.3-0.1-0.9-0.1-1.4c0-0.4,0-0.8,0-1.1c0-2.9,0-7.5,0-12
              l0-10.7l0-27.9c0.3-7.3,5.5-10.6,10.5-10.6c5,0,10.2,3.3,10.5,10.6l0,24.6l0,24.3v0.5c0,0.6,0,1.1,0,1.5h0c0.1,4.9,4.3,8.7,9.6,8.7
              c2.3,0,4.5-0.8,6.2-2.3c1.7-1.5,2.9-3.4,3.5-5.6l0.7-2.6c1.8-6.2,7-6.7,8.6-6.7c4.1,0,8.6,2.7,9.1,8.5
              C256.8,176.4,256.3,179.9,255.2,183.2z"
              />
              <path
                d="M495.2,172.8c-0.5-7.9-6.8-12.2-13-12.2c-5.2,0-10.5,3-12.4,9.5l-0.7,2.6c-0.4,1.5-1.1,2.7-2.2,3.7
              c-1,0.9-2.3,1.3-3.6,1.3c-2.8,0-5.5-1.9-5.6-4.9c0,0,0-1.8,0-1.9c0-12.8,0.1-36,0.1-49c-0.4-9.6-7.4-14.4-14.5-14.4
              s-14.1,4.8-14.5,14.4l0,28c0,5.6,0,17.3,0,22.8c0,0.9,0,2.1,0.1,3c1.3,17.4,16.2,31,33.2,31c1.7,0,3.3-0.1,5-0.4
              c12-1.7,22.6-10.4,26.4-22C494.8,180.7,495.4,176.7,495.2,172.8z M489.8,183.2c-3.3,10.1-12.6,17.8-23.2,19.3h0l0,0
              c-1.5,0.2-2.9,0.4-4.4,0.4c-15,0-28.2-12.3-29.3-27.4l0-0.1l0-0.2c0-0.3,0-0.9,0-1.4c0-0.4,0-0.8,0-1.1c0-2.9,0-7.4,0-11.9l0-10.8
              l0-27.9c0.3-7.3,5.5-10.6,10.5-10.6c5,0,10.2,3.3,10.5,10.6l0,26.5l0,22.4v0.5c0,0.6,0,1.1,0,1.5h0c0.1,4.9,4.3,8.7,9.6,8.7
              c2.3,0,4.5-0.8,6.2-2.3c1.7-1.5,2.9-3.4,3.5-5.6l0.7-2.6c1.8-6.2,7-6.7,8.6-6.7c4.1,0,8.6,2.7,9.1,8.5
              C491.4,176.4,490.9,179.9,489.8,183.2z"
              />
              <path
                d="M145.2,112c4.5,0,8.1,3.6,8.1,8.1c0,4.5-3.6,8.1-8.1,8.1c-16,0-28.9,13-28.9,28.9c0,16,13,28.9,28.9,28.9
              c4.5,0,8.1,3.6,8.1,8.1s-3.6,8.1-8.1,8.1c-24.9,0-45.2-20.3-45.2-45.2C100,132.3,120.3,112,145.2,112L145.2,112z M145.2,108
              c-27.1,0-49.1,22-49.1,49.1c0,27.1,22,49.1,49.1,49.1c6.7,0,12.1-5.4,12.1-12.1c0-6.7-5.4-12.1-12.1-12.1c-13.8,0-25-11.2-25-25
              c0-13.8,11.2-25,25-25c6.7,0,12.1-5.4,12.1-12.1C157.2,113.4,151.8,108,145.2,108L145.2,108z"
              />
              <path
                d="M410.1,112.1c4.5,0,8.1,3.6,8.1,8.1s-3.6,8.1-8.1,8.1c-16,0-28.9,13-28.9,28.9c0,16,13,28.9,28.9,28.9
              c4.5,0,8.1,3.6,8.1,8.1s-3.6,8.1-8.1,8.1c-24.9,0-45.2-20.3-45.2-45.2C364.9,132.4,385.2,112.1,410.1,112.1L410.1,112.1z
              M410.1,108.2c-27.1,0-49.1,22-49.1,49.1c0,27.1,22,49.1,49.1,49.1c6.7,0,12.1-5.4,12.1-12.1c0-6.7-5.4-12.1-12.1-12.1
              c-13.8,0-25-11.2-25-25c0-13.8,11.2-25,25-25c6.7,0,12.1-5.4,12.1-12.1C422.1,113.6,416.7,108.2,410.1,108.2L410.1,108.2z"
              />
              <path
                d="M208.5,68.6c4.6,0,8.3,3.7,8.3,8.3c0,4.6-3.7,8.3-8.3,8.3s-8.3-3.7-8.3-8.3C200.2,72.3,203.9,68.6,208.5,68.6
              L208.5,68.6z M208.5,64.6c-6.7,0-12.2,5.5-12.2,12.2c0,6.7,5.5,12.2,12.2,12.2c6.7,0,12.2-5.5,12.2-12.2
              C220.7,70.1,215.2,64.6,208.5,64.6L208.5,64.6z"
              />
              <path
                d="M160.6,149.1c4.6,0,8.3,3.7,8.3,8.3s-3.7,8.3-8.3,8.3s-8.3-3.7-8.3-8.3S156,149.1,160.6,149.1L160.6,149.1z
              M160.6,145.2c-6.7,0-12.2,5.5-12.2,12.2c0,6.7,5.5,12.2,12.2,12.2c6.7,0,12.2-5.5,12.2-12.2C172.8,150.7,167.3,145.2,160.6,145.2
              L160.6,145.2z"
              />
              <path
                d="M26.8,39.7c5,0,10.2,3.3,10.5,10.5l0,74.1l0,48.4c0,4.9,4.1,8.9,9.3,9c0.1,0,0.2,0,0.3,0c4.6,0,8.6-3.2,10-7.8
              l0.8-2.8c1.1-3.6,4.4-6,8.1-6c0.8,0,1.7,0.1,2.5,0.4c2.7,0.9,4.5,2.6,5.4,5c1.9,5.3-0.2,13.3-3.4,18.5c-3,4.9-7.6,8.9-12.9,11.2
              c-3.6,1.6-7.7,2.5-11.8,2.5c-4.9,0-9.6-1.2-13.8-3.5c-9.4-5-15.7-15.6-15.7-26.3c0-12.7,0-45.8,0-75.3c0-20,0-38.3,0-47.5
              C16.6,42.9,21.8,39.7,26.8,39.7L26.8,39.7z M26.8,35.7c-7.1,0-14.1,4.8-14.5,14.4c0,22.7,0,101.5,0,122.9c0,12.2,7,24.1,17.8,29.8
              c4.8,2.6,10.2,3.9,15.6,3.9c4.6,0,9.2-0.9,13.4-2.8c6-2.7,11.2-7.1,14.6-12.7c5.5-9,8.5-25.2-4.1-29.4c-1.2-0.4-2.4-0.5-3.6-0.5
              c-5.3,0-10.2,3.4-11.9,8.8c0,0-0.8,2.8-0.8,2.8c-0.9,2.9-3.3,5.1-6.3,5.1c-0.1,0-0.1,0-0.2,0c-2.7-0.1-5.5-2.2-5.5-5.1
              c0-21.6,0-99.6,0-122.6C40.9,40.5,33.9,35.7,26.8,35.7L26.8,35.7z"
              />
              <path
                d="M295.5,39.7c5,0,10.2,3.3,10.5,10.5l0,63l0,59.6c0,4.9,4.1,8.9,9.3,9c0.1,0,0.2,0,0.3,0c4.6,0,8.6-3.2,10-7.8
              l0.8-2.8c1.1-3.6,4.4-6,8.1-6c0.8,0,1.7,0.1,2.5,0.4c2.7,0.9,4.5,2.6,5.4,5c1.9,5.3-0.2,13.3-3.4,18.5c-3,4.9-7.6,8.9-12.9,11.2
              c-3.6,1.6-7.7,2.5-11.8,2.5c-4.9,0-9.6-1.2-13.8-3.5c-9.4-5-15.7-15.6-15.7-26.3c0-12.7,0-45.8,0-75.3c0-20,0-38.3,0-47.5
              C285.3,42.9,290.5,39.7,295.5,39.7L295.5,39.7z M295.5,35.7c-7.1,0-14.1,4.8-14.5,14.4c0,22.7,0,101.5,0,122.9
              c0,12.2,7,24.1,17.8,29.8c4.8,2.6,10.2,3.9,15.6,3.9c4.6,0,9.2-0.9,13.4-2.8c6-2.7,11.2-7.1,14.6-12.7c5.5-9,8.5-25.2-4.1-29.4
              c-1.2-0.4-2.4-0.5-3.6-0.5c-5.3,0-10.2,3.4-11.9,8.8c0,0-0.8,2.8-0.8,2.8c-0.9,2.9-3.3,5.1-6.3,5.1c-0.1,0-0.1,0-0.2,0
              c-2.7-0.1-5.5-2.2-5.5-5.1c0-21.6,0-99.6,0-122.6C309.6,40.5,302.6,35.7,295.5,35.7L295.5,35.7z"
              />
            </g>
          </svg>
        </Link>
      </Flex>
      <div
        sx={{
          a: {
            fontSize: 4,
            color: `text`,
            display: `flex`,
            alignItems: `center`,
            "&:hover": {
              color: `primary`,
            },
            "&:not(:first-of-type)": {
              ml: 0,
            },
          },
          justifyContent: `flex-end`,
          flex: 1,
          display: `flex`,
          order: 3,
        }}
      >
        <SocialLinks />
        {/* <button
          sx={{ variant: `buttons.toggle`, fontWeight: `semibold` }}
          onClick={toggleColorMode}
          type="button"
          aria-label="Toggle dark mode"
        >
          {isDark ? `Light` : `Dark`}
        </button> */}
        <ColorModeToggle isDark={isDark} toggle={toggleColorMode} />
      </div>
    </Flex>
  );
}

export default Header
